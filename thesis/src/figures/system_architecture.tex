\begin{figure}
	\centering

	\begin{tikzpicture}
		\tikzset{
		replica/.style={rectangle, draw, rounded corners=1mm,fill=white},
		local_replica/.style={replica},
		remote_replica/.style={replica,scale=0.66},
		label/.style={font=\bfseries},
		rel/.style={
		->, >={Stealth[round]},bend left,},
		}

		\node[local_replica] (local) {\replica};
		\node[label] (local-label) [above=0pt of local] {Local Replica};

		\node[remote_replica] (remote3) [right=of local,yshift=+15pt,xshift=+15pt] {\replica};
		\node[remote_replica] (remote2) [right=of local,yshift=+10pt,xshift=+10pt] {\replica};
		\node[remote_replica] (remote1) [right=of local,yshift=+5pt,xshift=+5pt] {\replica};
		\node[remote_replica] (remote0) [right=of local] {\replica};
		\node[label] (remote-label) [above=0pt of remote3] {Remote Replicas};

		\begin{scope}[on background layer]
			\draw[rel] (local.north east) to[] (remote0.north west);
			\draw[rel] (local.north east) to[] (remote1.north west);
			\draw[rel] (local.north east) to[] (remote2.north west);
			% TODO: Does not compile here.
			% \draw[rel] (local.north east) to["distributes \deltaI{local}"] (remote3.north west);

			\draw[rel] (remote0.south west) to[] (local.south east);
			\draw[rel] (remote1.south west) to[] (local.south east);
			\draw[rel] (remote2.south west) to[] (local.south east);
			% TODO: Does not compile here.
			% \draw[rel] (remote3.south west) to["receives \deltaI{remote}"] (local.south east);
		\end{scope}

	\end{tikzpicture}

	\caption{
		Overview of the system architecture from the perspective of a local
		replica.
		\deltaI{local} and \deltaI{remote} refer to the input deltas to
		the EDBs from the local and remote replicas, respectively.
		\deltaO{} models the output delta of all Datalog queries and is based on
		the current state of the EDBs on the respective replica.
	}\label{fig:system-arch}
\end{figure}
